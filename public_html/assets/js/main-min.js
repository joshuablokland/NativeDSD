const breakpointMobile=616,breakpointDesktop=1216;class Navigation{constructor(e){e&&(this.wrapper=document.querySelector(".navbar-wrapper"),this.element=e,this.form=e.querySelector(".search-form"),this.input=e.querySelector(".search-form input"),this.close=e.querySelector(".search-form .search-icon-close"),this.boundHandleKeyup=this.handleKeyup.bind(this),this.activeClass="isSearchVisible",this.isVisible=!1,this.classes={sticky:"sticky",removeSticky:"remove-sticky"},this.element.addEventListener("submit",this.handleSubmit.bind(this)),this.close.addEventListener("click",this.handleClick.bind(this)),this.handleScrollBound=this.handleScroll.bind(this),window.innerWidth>breakpointDesktop&&window.addEventListener("scroll",this.handleScrollBound),window.innerWidth<=breakpointDesktop&&this.wrapper.classList.add(this.classes.removeSticky))}handleScroll(e){const t=this.wrapper.classList.contains(this.classes.sticky);window.scrollY>24&&t||(window.scrollY>24&&!t?this.wrapper.classList.add(this.classes.sticky):this.wrapper.classList.remove(this.classes.sticky))}handleClick(e){e.preventDefault(),this.toggleSearch()}handleSubmit(e){e.preventDefault(),this.isVisible&&this.form.submit(),this.toggleSearch()}handleKeyup(e){27===e.keyCode&&this.toggleSearch()}handleResize(){if(console.log(window.removeEventListener("scroll",this.handleScrollBound,!1)),!this.isVisible&&window.innerWidth<=breakpointDesktop)this.form.style.width="16px";else{if(!this.isVisible&&window.innerWidth>breakpointDesktop)return this.form.style.width="16px",this.wrapper.classList.remove(this.classes.removeSticky),window.addEventListener("scroll",this.handleScrollBound),void this.handleScroll();if(window.innerWidth<=breakpointDesktop){const e=window.innerWidth<=breakpointMobile?32:96;return this.form.style.width=window.innerWidth-e+"px",this.wrapper.classList.remove(this.classes.sticky),void this.wrapper.classList.add(this.classes.removeSticky)}this.form.style.width="256px"}}toggleSearch(){if(this.isVisible=!this.isVisible,this.isVisible)return this.element.classList.add(this.activeClass),this.input.focus(),this.input.addEventListener("keyup",this.boundHandleKeyup),void this.handleResize();this.handleResize(),this.input.removeEventListener("keyup",this.boundHandleKeyup,!0),this.element.classList.remove(this.activeClass)}}const navigation=new Navigation(document.getElementById("nativedsd-navigation"));class SubscribePopup{constructor(e){e&&(this.hasUserInteractedWithPopup()?e.remove():(this.element=e,this.isOpen=!this.hasUserInteractedWithPopup(),this.form=e.querySelector(".subscribe-form"),this.btnClose=e.querySelector(".btn-close-subscribe"),this.form.addEventListener("submit",this.handleSubmit.bind(this)),this.btnClose.addEventListener("click",this.handleClick.bind(this)),this.setClassName()))}toggleOpen(){this.isOpen=!this.isOpen,this.setClassName()}setClassName(){this.isOpen?this.element.classList.add("show"):this.element.classList.remove("show")}handleSubmit(){this.toggleOpen(),this.setUserInteractedWithPopup()}handleClick(){this.toggleOpen(),this.setUserInteractedWithPopup()}hasUserInteractedWithPopup(){return window.localStorage.getItem("hasUserInteractedWithPopup")}setUserInteractedWithPopup(){window.localStorage.setItem("hasUserInteractedWithPopup",!0)}}const subscribePopup=new SubscribePopup(document.getElementById("nativedsd-subscribe-popup"));class MusicPlayer{constructor(e,t){this.audio=new Audio(e.getAttribute("data-source")),this.callbacks=t;const s=e.querySelector("button.btn-play"),i=e.querySelector("button.btn-pause"),n=e.querySelector(".nativedsd-player-progress-path");this.audio.addEventListener("loadeddata",()=>{const t=new Date(1e3*this.audio.duration).toISOString().substr(11,8);e.querySelector(".nativedsd-player-duration").innerHTML=t}),this.audio.addEventListener("timeupdate",()=>{const e=138*(this.audio.currentTime/this.audio.duration);n.setAttribute("stroke-dasharray",`${e},138`)}),this.audio.addEventListener("pause",()=>{s.classList.add("show"),i.classList.remove("show"),e.classList.remove("is-playing")}),this.audio.addEventListener("play",()=>{i.classList.add("show"),s.classList.remove("show"),e.classList.add("is-playing")}),s.addEventListener("click",()=>{this.callbacks.onPlay(),this.audio.play()}),i.addEventListener("click",()=>{this.audio.pause(),this.callbacks.onPause()})}}const musicPlayers=(()=>{const e=document.getElementsByClassName("nativedsd-player");if(0===e.length)return;const t=Object.values(e).map(e=>new MusicPlayer(e,{onPlay:()=>{t.forEach(e=>e.audio.pause())},onPause:()=>{}}))})();class ScrollIndicator{constructor(e,t){e&&(this.element=e,this.progress=t,window.addEventListener("scroll",this.handleScroll.bind(this)))}handleScroll(){if(window.scrollY>this.element.offsetHeight-window.innerHeight)return void this.setPercentage(100);const e=(this.element.offsetHeight-window.innerHeight)/window.innerHeight,t=window.scrollY/window.innerHeight/e*100;this.setPercentage(t)}setPercentage(e){const t=Math.round(e);this.progress.style.width=t+"%"}}const scrollIndicator=new ScrollIndicator(document.querySelector(".track-scroll-progress"),document.querySelector(".track-scroll-progress-bar"));window.addEventListener("resize",()=>{navigation.element&&navigation.handleResize()});