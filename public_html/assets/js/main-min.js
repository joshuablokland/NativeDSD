const breakpointMobile=616,breakpointDesktop=1216;class Navigation{constructor(e){e&&(this.wrapper=document.querySelector(".navbar-wrapper"),this.element=e,this.form=e.querySelector(".search-form"),this.input=e.querySelector(".search-form input"),this.close=e.querySelector(".search-form .search-icon-close"),this.boundHandleKeyup=this.handleKeyup.bind(this),this.activeClass="isSearchVisible",this.isVisible=!1,this.classes={sticky:"sticky",removeSticky:"remove-sticky"},this.element.addEventListener("submit",this.handleSubmit.bind(this)),this.close.addEventListener("click",this.handleClick.bind(this)),this.handleScrollBound=this.handleScroll.bind(this),window.innerWidth>breakpointDesktop&&document.addEventListener("scroll",this.handleScrollBound),window.innerWidth<=breakpointDesktop&&this.wrapper.classList.add(this.classes.removeSticky))}handleScroll(e){const s=this.wrapper.classList.contains(this.classes.sticky);window.scrollY>24&&s||(window.scrollY>24&&!s?this.wrapper.classList.add(this.classes.sticky):this.wrapper.classList.remove(this.classes.sticky))}handleClick(e){e.preventDefault(),this.toggleSearch()}handleSubmit(e){e.preventDefault(),this.isVisible&&this.form.submit(),this.toggleSearch()}handleKeyup(e){27===e.keyCode&&this.toggleSearch()}handleResize(){if(document.removeEventListener("scroll",this.handleScrollBound,!1),window.innerWidth<=breakpointDesktop&&(this.wrapper.classList.remove(this.classes.sticky),this.wrapper.classList.add(this.classes.removeSticky)),window.innerWidth>breakpointDesktop&&(this.wrapper.classList.remove(this.classes.removeSticky),this.wrapper.classList.add(this.classes.sticky),document.addEventListener("scroll",this.handleScrollBound),this.handleScroll()),this.isVisible)if(window.innerWidth<=breakpointDesktop){const e=window.innerWidth<=breakpointMobile?32:96;this.form.style.width=window.innerWidth-e+"px"}else this.form.style.width="256px";else this.form.style.width="16px"}toggleSearch(){if(this.isVisible=!this.isVisible,this.isVisible)return this.element.classList.add(this.activeClass),this.input.focus(),this.input.addEventListener("keyup",this.boundHandleKeyup),void this.handleResize();this.handleResize(),this.input.removeEventListener("keyup",this.boundHandleKeyup,!0),this.element.classList.remove(this.activeClass)}}const navigation=new Navigation(document.getElementById("nativedsd-navigation"));class SubscribePopup{constructor(e){e&&(this.hasUserInteractedWithPopup()?e.remove():(this.element=e,this.isOpen=!this.hasUserInteractedWithPopup(),this.form=e.querySelector(".subscribe-form"),this.btnClose=e.querySelector(".btn-close-subscribe"),this.form.addEventListener("submit",this.handleSubmit.bind(this)),this.btnClose.addEventListener("click",this.handleClick.bind(this)),this.setClassName()))}toggleOpen(){this.isOpen=!this.isOpen,this.setClassName()}setClassName(){this.isOpen?this.element.classList.add("show"):this.element.classList.remove("show")}handleSubmit(){this.toggleOpen(),this.setUserInteractedWithPopup()}handleClick(){this.toggleOpen(),this.setUserInteractedWithPopup()}hasUserInteractedWithPopup(){return window.localStorage.getItem("hasUserInteractedWithPopup")}setUserInteractedWithPopup(){window.localStorage.setItem("hasUserInteractedWithPopup",!0)}}const subscribePopup=new SubscribePopup(document.getElementById("nativedsd-subscribe-popup"));class MusicPlayer{constructor(e,s){this.audio=new Audio(e.getAttribute("data-source")),this.callbacks=s;const t=e.querySelector("button.btn-play"),i=e.querySelector("button.btn-pause"),n=e.querySelector(".nativedsd-player-progress-path");this.audio.addEventListener("loadeddata",()=>{const s=new Date(1e3*this.audio.duration).toISOString().substr(11,8);e.querySelector(".nativedsd-player-duration").innerHTML=s}),this.audio.addEventListener("timeupdate",()=>{const e=138*(this.audio.currentTime/this.audio.duration);n.setAttribute("stroke-dasharray",`${e},138`)}),this.audio.addEventListener("pause",()=>{t.classList.add("show"),i.classList.remove("show"),e.classList.remove("is-playing")}),this.audio.addEventListener("play",()=>{i.classList.add("show"),t.classList.remove("show"),e.classList.add("is-playing")}),t.addEventListener("click",()=>{this.callbacks.onPlay(),this.audio.play()}),i.addEventListener("click",()=>{this.audio.pause(),this.callbacks.onPause()})}}const musicPlayers=(()=>{const e=document.getElementsByClassName("nativedsd-player");if(0===e.length)return;const s=Object.values(e).map(e=>new MusicPlayer(e,{onPlay:()=>{s.forEach(e=>e.audio.pause())},onPause:()=>{}}))})();class ScrollIndicator{constructor(e,s){e&&(this.element=e,this.progress=s,document.addEventListener("scroll",this.handleScroll.bind(this)))}handleScroll(){if(window.scrollY>this.element.offsetHeight-window.innerHeight)return void this.setPercentage(100);const e=(this.element.offsetHeight-window.innerHeight)/window.innerHeight,s=window.scrollY/window.innerHeight/e*100;this.setPercentage(s)}setPercentage(e){const s=Math.round(e);this.progress.style.width=s+"%"}}const scrollIndicator=new ScrollIndicator(document.querySelector(".track-scroll-progress"),document.querySelector(".track-scroll-progress-bar"));window.addEventListener("resize",()=>{navigation.element&&navigation.handleResize()});